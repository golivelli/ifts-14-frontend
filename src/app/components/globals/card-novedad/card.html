@if (filteredNoticias.length === 0) {
  <p class="italic text-center text-[#555] mt-2">
    Aún no se cargó ninguna {{ _filtroCategoria === 'anuncio' ? 'noticia institucional' : 'novedad' }}.
  </p>
}

@if (filteredNoticias.length > 0) {
  <div class="flex items-center w-full gap-4">

    <!-- Flecha izquierda -->
    @if (filteredNoticias.length > 3) {
      <button (click)="prev()" [disabled]="currentIndex === 0"
        class="p-2 rounded-full hover:bg-gray-100 transition-colors disabled:opacity-30 disabled:cursor-not-allowed">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
          stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M15 18l-6-6 6-6" />
        </svg>
      </button>
    }

    <!-- GRID DE NOTICIAS (siempre grid, sin ngClass dinámico) -->
    <div class="grid gap-8 flex-1"
        [ngClass]="{
            'grid-cols-1 md:grid-cols-1 place-items-center': noticiasVisibles.length === 1,
            'grid-cols-1 md:grid-cols-2 place-items-center': noticiasVisibles.length === 2,
            'grid-cols-1 md:grid-cols-3': noticiasVisibles.length >= 3
        }">

      @for (noticia of noticiasVisibles; track noticia.id) {
        <div class="w-[450px] bg-white border border-[#DDDDDD] rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow duration-300">
                <div class="p-6 flex flex-col justify-around">
                    <div class="flex justify-between items-center gap-2 mb-3">
                      <span class="text-sm text-gray-500">{{ noticiasService.formatearFecha(noticia.fecha) }}</span>
                      <span class="px-3 py-1 rounded-full text-xs font-semibold"
                          [class.bg-primary-100]="noticia.tipo === 'novedad'"
                          [class.text-primary-800]="noticia.tipo === 'novedad'"
                          [class.bg-accent-100]="noticia.tipo === 'anuncio'"
                          [class.text-accent-800]="noticia.tipo === 'anuncio'">
                          {{ noticia.tipo | titlecase }}
                      </span>
                    </div>
                    <h3 class="text-xl font-bold text-[#2E2E2E] mb-3">{{ noticia.titulo }}</h3>
                    <p class="text-gray-600 mb-4 line-clamp-3">{{ noticia.descripcion }}</p>
                    <a [routerLink]="['/noticias', noticia.id]"
                        class="inline-flex items-center text-primary-600 hover:text-primary-700 font-normal hover:font-semibold transition-all duration-200">
                        Leer más
                        <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </a>
                </div>
            </div>
      }
    </div>

    <!-- Flecha derecha -->
    @if (filteredNoticias.length > 3) {
      <button (click)="next()" [disabled]="currentIndex + itemsToShow >= filteredNoticias.length"
        class="p-2 rounded-full hover:bg-gray-100 transition-colors disabled:opacity-30 disabled:cursor-not-allowed">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
          stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M9 18l6-6-6-6" />
        </svg>
      </button>
    }

  </div>
}